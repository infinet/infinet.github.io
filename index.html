<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link type="text/css" href="css/style.css" rel="stylesheet">
  <title>中国农历、节气、及传统节日的ics文件</title>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47778320-1', 'infinet.github.io');
  ga('send', 'pageview');
</script>
</head>
<body>
<div id="content">
<h1>iCalendar格式的中国农历、节气、及传统节日</h1>

<p>iCalendar是一种通用的日历交换格式，很多软件和设备，比如google calendar, apple calendar, thunderbird + lightning插件, iphone/ipad, 安卓都支持。</p>
<p>以前订过iCalendar格式农历日历，但慢慢地它们都停止了更新。感谢<a href="http://data.weather.gov.hk/gts/time/conversion1_text_c.htm">香港天文台</a>为公众提供了从1901年到2100年间两百年的农历-公历对照表，也就是这里用到的数据。</p>

<p><img src="images/lunar_calendar.jpg" alt="lightning-screenshot" style="max-width:100%;"></p>

<h3>用法:</h3>
<p>下载包括前年、今年以及明年三年日历的<a href="https://raw.github.com/infinet/lunar-calender/master/chinese_lunar_prev_year_next_year.ics">ics文件</a>，把它加入到你最常用的软件，不过最好直接在软件里订阅这个ics文件的链接，这样以后可以自动更新。</p>

<p>苹果设备上应该是: <br />
设置 =&gt; 邮件、通讯录、日历 =&gt; 添加账户 =&gt; 其它 =&gt; 日历 添加已订阅日历</p>

<p>如果在Mac的<a href="http://support.apple.com/kb/HT5029?viewlocale=zh_CN">iCal里订阅到iCloud</a>，这个日历还可以自动推送到所有使用那个iCloud账户的ios设备。</p>

<h3>生成更长时段农历</h3>

<p>如果需要更长时段的农历，请到<a href="https://github.com/infinet/lunar-calendar">农历项目主页</a>下载<code>lunar_ical.py及相关文件</code></p>

<p>直接运行<code>./lunar_ical.py</code>会从香港天文台抓取1901到2100年间所有数据，然后生成上面那个前后三年时段的农历ics文件；</p>

<p>使用参数<code>--start</code>和<code>--end</code>指定需要的起至日期, 例如:</p>

<pre><code>./lunar_ical.py --start=2010-05-01 --end=2021-12-31 </code></pre>


<p>超出1901-2100的农历数据使用<a href="ftp://ftp.imcce.fr/pub/ephem/planets/vsop87">VSOP87行星理论</a>和<a href="http://www.aanda.org/articles/aa/full/2007/33/aa7568-07/aa7568-07.html">LEA-406月球理论</a>生成。 以香港天文台的数据为标准，用此法生成的1949到2100年间农历有两处不一致：</p>

<p> 1）1979-01-20 大寒</p>

<p> 2）2057-09-29 农历九月全部日期错位一天</p>

上面两处节气及新月正好在午夜时分，数秒的计算误差就能左右该节气或新月属于前日深夜还是次日凌晨。


<p><a href="mailto: weichen302@gmail.com">Contact me</a></p>

<p><div id="footer">
    <div id="note">Powered by</div>
    <div id="logo">
    <a href="http://pages.github.com/"><img src="http://pages.github.com/images/logo.svg" alt="GitHub Pages"></a>
    </div></p>

</div>
</body></html>
